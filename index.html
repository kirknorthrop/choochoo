<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Choo Choo! All aboard the Data Train!</title>

        <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
        <meta name="author" content="Hakim El Hattab">

        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="reveal.js/css/reveal.css">
        <link rel="stylesheet" href="reveal.js/css/theme/black.css" id="theme">

        <!-- Theme used for syntax highlighting of code -->
        <link rel="stylesheet" href="reveal.js/lib/css/zenburn.css">

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'reveal.js/css/print/pdf.css' : 'reveal.js/css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
                <section>
                    <h1>Choo Choo!</h1>
                    <h2>All aboard the Data Train!</h2>
                    <img data-src="https://twemoji.maxcdn.com/2/svg/1f686.svg" style="width: 25%; height: 25%; border: none; background: none; box-shadow: none;">
                    <img data-src="https://twemoji.maxcdn.com/2/svg/1f687.svg" style="width: 25%; height: 25%; border: none; background: none; box-shadow: none;">
                    <p>Kirk Northrop</p>

                    <aside class="notes">
                        <p>Good morning - I'm Kirk Northrop and I'm going to talk to you about how we can use open data to see what trains are up to.</p>

                        <p>Or as the band The Automatic might have put it...</p>
                    </aside>
                </section>


                <section>
                    <h2>What's that coming over the hill?</h2>

                    <p class="fragment">It's 2P31, the 0927 service to Penarth</p>

                    <aside class="notes">
                        <p>What's that coming over the hill?</p>
                        <p>It's 2P31, the 0927 service to Penarth</p>
                        <p>You've probably heard a lot about Open Data. And you've thought "how do I get some of that". And as there's quite a big overlap in interest between programming and trains, let's see what it's all about...</p>
                    </aside>
                </section>

                <section>
                    <p>
                        <img data-src="https://twemoji.maxcdn.com/2/svg/1f682.svg" style="width: 15%; height: 15%; padding: 1em; border: none; background: none; box-shadow: none;">
                        <img data-src="https://twemoji.maxcdn.com/2/svg/1f440.svg" style="width: 15%; height: 15%; padding: 1em; border: none; background: none; box-shadow: none;">
                        <img data-src="https://twemoji.maxcdn.com/2/svg/1f4dd.svg" style="width: 15%; height: 15%; padding: 1em; border: none; background: none; box-shadow: none;">
                    </p>
                    <p>
                        <img data-src="https://twemoji.maxcdn.com/2/svg/1f645.svg" style="width: 15%; height: 15%; padding: 1em; border: none; background: none; box-shadow: none;">
                    </p>

                    <aside class="notes">
                        <p>Just a couple of notes - firstly, this talk is about open data, not big data.</p>
                        <p>There is a lot of data, but not in a big data way.</p>
                        <p>Also, nothing in this talk will let you find out anything much about the trains themselves, just what they are up to. Personally, I have little interest in the metal boxes on wheels. Some people get excited about steam trains, I get excited about DTG-R signalling systems.</p>
                        <p>See me more as the Fat Controller wondering where all his trains are.</p>
                    </aside>
                </section>

                <section>
                    <img class="stretch" data-src="IMG_1168.jpg" style="border: none;">

                    <aside class="notes">
                        <p>So why am I interested in this, you ask? My granddad was a signal engineer for most of his working life, and when I was little we used to go for walks alongside the railway.</p>
                        <p>On these walks he taught me details about the Cambridge area signalling system that mostly went right over the head of an eight year old. But obviously enough of it sunk in, and I still remember a lot of what he told me.</p>
                        <p>I'm sure he'd be amazed today if he knew we could find all this data out for ourselves over the internet.</p>
                    </aside>
                </section>

                <section>
                    <img data-src="https://twemoji.maxcdn.com/2/svg/1f3c1.svg" style="width: 15%; height: 15%; padding: 1em; border: none; background: none; box-shadow: none;">
                    <img data-src="https://twemoji.maxcdn.com/2/svg/1f947.svg" style="width: 15%; height: 15%; padding: 1em; border: none; background: none; box-shadow: none;">
                    <img data-src="https://twemoji.maxcdn.com/2/svg/1f4a8.svg" style="width: 15%; height: 15%; padding: 1em; border: none; background: none; box-shadow: none;">
                    <img data-src="https://twemoji.maxcdn.com/2/svg/23e9.svg" style="width: 15%; height: 15%; padding: 1em; border: none; background: none; box-shadow: none;">

                    <aside class="notes">
                        <p>There's a lot to get through here, and I want to help you understand how it works and what access we have rather than going through code in much detail, so some stuff might go past quite quickly.</p>
                        <p>The slides, code samples and additional resources will be available on GitHub, I'll give the link at the end and please feel free to ask me questions throughout the weekend.</p>
                    </aside>
                </section>

                <section>
                    <h2>Three main data providers</h2>

                    <p>Transport for London (TfL)</p>
                    <p>Rail Delivery Group (RDG)</p>
                    <p>Network Rail (NR)</p>

                    <aside class="notes">
                        <p>There's three sources of rail data in the UK.</p>

                        <p>First up - Transport for London - they have data for Tube, DLR, London Overground, buses and trams.</p>

                        <p>Then there's two providers for the main rail network - the Rail Delivery Group, which used to be called ATOC, and is better known as National Rail. It's owned by the rail franchise companies and they mainly care about services and fares.</p>

                        <p>Network Rail, who actually run the infrastructure of the British railways also have feeds - these are more focussed on signalling and trains.</p>

                        <p>You can spend ages playing with this data and understanding the links between them all. I'm hoping to give you a whirlwind introduction to that.</p>
                    </aside>
                </section>

                <section>
                        <h1>TfL Data</h1>
                        <h2>https://api.tfl.gov.uk/</h2>

                    <aside class="notes">
                        <p>We'll start with TfL purely because their data is relatively easy to access.</p>

                        <p>I'm going to move quite quickly through the TfL stuff - it's a simple API, I just want to give you an understanding how it fits together and what you can do. I'm assuming most of you know how use a simple JSON API. Then we can get onto the much more complicated National Rail stuff.</p>
                    </aside>
                </section>

                <section>
                    <h2>Good news:</h2>
                    <p><ul>
                        <li>Easy to get</li>
                        <li>JSON</li>
                    </ul></p>

                    <h2>Bad news:</h2>
                    <p><ul>
                        <li>Variable quality</li>
                        <li>Variable workingness</li>
                    </ul></p>

                    <aside class="notes">
                        <p>So. TfL have a unified API which has very poor documentation but is quite easy to use. TfL's live train data is easy to get hold of, and as it's JSON, it's even easier for us to use in Python.</p>
                        <p>Unfortunately the quality of the data is highly variable and not always reliably available.</p>

                        <p>For today, we're only interested in what tube trains are up to - Overground, DLR, Trams and Buses are all there if you want them.</p>
                    </aside>
                </section>

                <section>
                    <h2>NaPTAN Codes</h2>
                    <table>
                        <tr>
                            <td>Osterley Underground</td>
                            <td>940GZZLUOSY</td>
                        </tr>
                        <tr>
                            <td>King's Cross St. Pancras Underground</td>
                            <td>940GZZLUKSX</td>
                        </tr>
                        <tr>
                            <td>King's Cross Railway Station</td>
                            <td>9100KNGX</td>
                        </tr>
                        <tr>
                            <td>City Hall Bus Stop, Cardiff</td>
                            <td>5710WDB48419</td>
                        </tr>
                    </table>

                    <aside class="notes">
                        <p>In the UK, every single stop has what is called a NaPTAN code. This is a National Public Transport Access Node. You might have seen them in URLs, they look like this --></p>

                        <p>Every single bus stop and railway station has one or more of these codes that uniquely identify it. Now the big railways don't care about this at all, but TfL do.</p>

                        <p>Thankfully, they give us an easy way to look them up.</p>
                    </aside>
                </section>

                <section>
                    <p style="font-size:smaller;">https://api.tfl.gov.uk/StopPoint/Search/Osterley?modes=tube</p>
                    <pre class="fragment"><code data-trim data-noescape>{
  "$type": "Tfl.Api.Presentation.Entities.SearchResponse, Tfl.Api.Presentation.Entities",
  "query": "Osterley",
  "total": 1,
  "matches": [
    {
      "$type": "Tfl.Api.Presentation.Entities.MatchedStop, Tfl.Api.Presentation.Entities",
      "icsId": "1000171",
      "topMostParentId": "940GZZLUOSY",
      "modes": [
        "bus",
        "tube"
      ],
      "id": "940GZZLUOSY",
      "name": "Osterley Underground Station",
      "lat": 51.481274,
      "lon": -0.352224
    }
  ]
}</code></pre>

                    <aside class="notes">
                        <p>So we can search for our desired station - I'm using Osterley in West London as an example because it's small and simple.</p>

                        <p>And you can see that we've got back the code, along with some other useful information such as the GPS co-ordinates of the station.</p>
                    </aside>
                </section>

                <section>
                    <p style="font-size:smaller;">https://api.tfl.gov.uk/StopPoint/940GZZLUOSY/Arrivals</p>
                    <pre class="fragment"><code data-trim data-noescape>[
  {
    "$type": "Tfl.Api.Presentation.Entities.Prediction, Tfl.Api.Presentation.Entities",
    "id": "687179731",
    "operationType": 1,
    "vehicleId": "227",
    "naptanId": "940GZZLUOSY",
    "stationName": "Osterley Underground Station",
    "lineId": "piccadilly",
    "lineName": "Piccadilly",
    "platformName": "Westbound - Platform 1",
    "direction": "inbound",
    "bearing": "",
    "destinationNaptanId": "940GZZLUHRC",
    "destinationName": "Heathrow Terminals 1-2-3 Underground Station",
    "timestamp": "2017-10-16T19:58:13Z",
    "timeToStation": 976,
    "currentLocation": "At Ravenscourt Park Platform 2",
    "towards": "Heathrow T123 + 5",
    "expectedArrival": "2017-10-16T20:14:29Z",
    "timeToLive": "2017-10-16T20:14:29Z",
    "modeName": "tube",
    "timing": {
      "$type": "Tfl.Api.Presentation.Entities.PredictionTiming, Tfl.Api.Presentation.Entities",
      "countdownServerAdjustment": "00:00:00",
      "source": "0001-01-01T00:00:00",
      "insert": "0001-01-01T00:00:00",
      "read": "2017-10-16T19:57:37.193Z",
      "sent": "2017-10-16T19:58:13Z",
      "received": "0001-01-01T00:00:00"
    }
  },
  {
    "$type": "Tfl.Api.Presentation.Entities.Prediction, Tfl.Api.Presentation.Entities",
    "id": "-442130791",
    "operationType": 1,
    "vehicleId": "235",
    "naptanId": "940GZZLUOSY",
    "stationName": "Osterley Underground Station",
    "lineId": "piccadilly",
    "lineName": "Piccadilly",
    "platformName": "Westbound - Platform 1",
    "direction": "inbound",
    "bearing": "",
    "destinationNaptanId": "940GZZLUHR4",
    "destinationName": "Heathrow Terminal 4 Underground Station",
    "timestamp": "2017-10-16T19:58:13Z",
    "timeToStation": 1696,
    "currentLocation": "At South Kensington Platform 3",
    "towards": "Heathrow via T4 Loop",
    "expectedArrival": "2017-10-16T20:26:29Z",
    "timeToLive": "2017-10-16T20:26:29Z",
    "modeName": "tube",
    "timing": {
      "$type": "Tfl.Api.Presentation.Entities.PredictionTiming, Tfl.Api.Presentation.Entities",
      "countdownServerAdjustment": "00:00:00",
      "source": "0001-01-01T00:00:00",
      "insert": "0001-01-01T00:00:00",
      "read": "2017-10-16T19:57:37.24Z",
      "sent": "2017-10-16T19:58:13Z",
      "received": "0001-01-01T00:00:00"
    }
  },
  {
    "$type": "Tfl.Api.Presentation.Entities.Prediction, Tfl.Api.Presentation.Entities",
    "id": "-38977304",
    "operationType": 1,
    "vehicleId": "252",
    "naptanId": "940GZZLUOSY",
    "stationName": "Osterley Underground Station",
    "lineId": "piccadilly",
    "lineName": "Piccadilly",
    "platformName": "Eastbound - Platform 2",
    "direction": "outbound",
    "bearing": "",
    "destinationNaptanId": "940GZZLUASG",
    "destinationName": "Arnos Grove Underground Station",
    "timestamp": "2017-10-16T19:58:13Z",
    "timeToStation": 16,
    "currentLocation": "Between Hounslow East and Osterley",
    "towards": "Arnos Grove",
    "expectedArrival": "2017-10-16T19:58:29Z",
    "timeToLive": "2017-10-16T19:58:29Z",
    "modeName": "tube",
    "timing": {
      "$type": "Tfl.Api.Presentation.Entities.PredictionTiming, Tfl.Api.Presentation.Entities",
      "countdownServerAdjustment": "00:00:00",
      "source": "0001-01-01T00:00:00",
      "insert": "0001-01-01T00:00:00",
      "read": "2017-10-16T19:57:37.256Z",
      "sent": "2017-10-16T19:58:13Z",
      "received": "0001-01-01T00:00:00"
    }
  },
  {
    "$type": "Tfl.Api.Presentation.Entities.Prediction, Tfl.Api.Presentation.Entities",
    "id": "-2045767041",
    "operationType": 1,
    "vehicleId": "306",
    "naptanId": "940GZZLUOSY",
    "stationName": "Osterley Underground Station",
    "lineId": "piccadilly",
    "lineName": "Piccadilly",
    "platformName": "Westbound - Platform 1",
    "direction": "inbound",
    "bearing": "",
    "destinationNaptanId": "940GZZLUHRC",
    "destinationName": "Heathrow Terminals 1-2-3 Underground Station",
    "timestamp": "2017-10-16T19:58:13Z",
    "timeToStation": 1096,
    "currentLocation": "At Hammersmith Platform 2",
    "towards": "Heathrow T123 + 5",
    "expectedArrival": "2017-10-16T20:16:29Z",
    "timeToLive": "2017-10-16T20:16:29Z",
    "modeName": "tube",
    "timing": {
      "$type": "Tfl.Api.Presentation.Entities.PredictionTiming, Tfl.Api.Presentation.Entities",
      "countdownServerAdjustment": "00:00:00",
      "source": "0001-01-01T00:00:00",
      "insert": "0001-01-01T00:00:00",
      "read": "2017-10-16T19:57:37.209Z",
      "sent": "2017-10-16T19:58:13Z",
      "received": "0001-01-01T00:00:00"
    }
  },
  {
    "$type": "Tfl.Api.Presentation.Entities.Prediction, Tfl.Api.Presentation.Entities",
    "id": "-441999720",
    "operationType": 1,
    "vehicleId": "315",
    "naptanId": "940GZZLUOSY",
    "stationName": "Osterley Underground Station",
    "lineId": "piccadilly",
    "lineName": "Piccadilly",
    "platformName": "Westbound - Platform 1",
    "direction": "inbound",
    "bearing": "",
    "destinationNaptanId": "940GZZLUHR4",
    "destinationName": "Heathrow Terminal 4 Underground Station",
    "timestamp": "2017-10-16T19:58:13Z",
    "timeToStation": 436,
    "currentLocation": "Between Acton Town and South Ealing",
    "towards": "Heathrow via T4 Loop",
    "expectedArrival": "2017-10-16T20:05:29Z",
    "timeToLive": "2017-10-16T20:05:29Z",
    "modeName": "tube",
    "timing": {
      "$type": "Tfl.Api.Presentation.Entities.PredictionTiming, Tfl.Api.Presentation.Entities",
      "countdownServerAdjustment": "00:00:00",
      "source": "0001-01-01T00:00:00",
      "insert": "0001-01-01T00:00:00",
      "read": "2017-10-16T19:57:37.178Z",
      "sent": "2017-10-16T19:58:13Z",
      "received": "0001-01-01T00:00:00"
    }
  },
  {
    "$type": "Tfl.Api.Presentation.Entities.Prediction, Tfl.Api.Presentation.Entities",
    "id": "-38846229",
    "operationType": 1,
    "vehicleId": "332",
    "naptanId": "940GZZLUOSY",
    "stationName": "Osterley Underground Station",
    "lineId": "piccadilly",
    "lineName": "Piccadilly",
    "platformName": "Eastbound - Platform 2",
    "direction": "outbound",
    "bearing": "",
    "destinationNaptanId": "940GZZLUCKS",
    "destinationName": "Cockfosters Underground Station",
    "timestamp": "2017-10-16T19:58:13Z",
    "timeToStation": 376,
    "currentLocation": "Between Hatton Cross and Hounslow West",
    "towards": "Cockfosters",
    "expectedArrival": "2017-10-16T20:04:29Z",
    "timeToLive": "2017-10-16T20:04:29Z",
    "modeName": "tube",
    "timing": {
      "$type": "Tfl.Api.Presentation.Entities.PredictionTiming, Tfl.Api.Presentation.Entities",
      "countdownServerAdjustment": "00:00:00",
      "source": "0001-01-01T00:00:00",
      "insert": "0001-01-01T00:00:00",
      "read": "2017-10-16T19:57:37.272Z",
      "sent": "2017-10-16T19:58:13Z",
      "received": "0001-01-01T00:00:00"
    }
  },
  {
    "$type": "Tfl.Api.Presentation.Entities.Prediction, Tfl.Api.Presentation.Entities",
    "id": "1090332965",
    "operationType": 1,
    "vehicleId": "344",
    "naptanId": "940GZZLUOSY",
    "stationName": "Osterley Underground Station",
    "lineId": "piccadilly",
    "lineName": "Piccadilly",
    "platformName": "Eastbound - Platform 2",
    "direction": "outbound",
    "bearing": "",
    "destinationNaptanId": "940GZZLUASG",
    "destinationName": "Arnos Grove Underground Station",
    "timestamp": "2017-10-16T19:58:13Z",
    "timeToStation": 556,
    "currentLocation": "Between Heathrow and Hatton Cross",
    "towards": "Arnos Grove",
    "expectedArrival": "2017-10-16T20:07:29Z",
    "timeToLive": "2017-10-16T20:07:29Z",
    "modeName": "tube",
    "timing": {
      "$type": "Tfl.Api.Presentation.Entities.PredictionTiming, Tfl.Api.Presentation.Entities",
      "countdownServerAdjustment": "00:00:00",
      "source": "0001-01-01T00:00:00",
      "insert": "0001-01-01T00:00:00",
      "read": "2017-10-16T19:57:37.287Z",
      "sent": "2017-10-16T19:58:13Z",
      "received": "0001-01-01T00:00:00"
    }
  },
  {
    "$type": "Tfl.Api.Presentation.Entities.Prediction, Tfl.Api.Presentation.Entities",
    "id": "-1642810290",
    "operationType": 1,
    "vehicleId": "353",
    "naptanId": "940GZZLUOSY",
    "stationName": "Osterley Underground Station",
    "lineId": "piccadilly",
    "lineName": "Piccadilly",
    "platformName": "Eastbound - Platform 2",
    "direction": "outbound",
    "bearing": "",
    "destinationNaptanId": "940GZZLUCKS",
    "destinationName": "Cockfosters Underground Station",
    "timestamp": "2017-10-16T19:58:13Z",
    "timeToStation": 856,
    "currentLocation": "Approaching Heathrow Terminal 1,2,3",
    "towards": "Cockfosters",
    "expectedArrival": "2017-10-16T20:12:29Z",
    "timeToLive": "2017-10-16T20:12:29Z",
    "modeName": "tube",
    "timing": {
      "$type": "Tfl.Api.Presentation.Entities.PredictionTiming, Tfl.Api.Presentation.Entities",
      "countdownServerAdjustment": "00:00:00",
      "source": "0001-01-01T00:00:00",
      "insert": "0001-01-01T00:00:00",
      "read": "2017-10-16T19:57:37.303Z",
      "sent": "2017-10-16T19:58:13Z",
      "received": "0001-01-01T00:00:00"
    }
  },
  {
    "$type": "Tfl.Api.Presentation.Entities.Prediction, Tfl.Api.Presentation.Entities",
    "id": "1090201893",
    "operationType": 1,
    "vehicleId": "364",
    "naptanId": "940GZZLUOSY",
    "stationName": "Osterley Underground Station",
    "lineId": "piccadilly",
    "lineName": "Piccadilly",
    "platformName": "Westbound - Platform 1",
    "direction": "inbound",
    "bearing": "",
    "destinationNaptanId": "940GZZLUHR4",
    "destinationName": "Heathrow Terminal 4 Underground Station",
    "timestamp": "2017-10-16T19:58:13Z",
    "timeToStation": 1336,
    "currentLocation": "Approaching Barons Court",
    "towards": "Heathrow via T4 Loop",
    "expectedArrival": "2017-10-16T20:20:29Z",
    "timeToLive": "2017-10-16T20:20:29Z",
    "modeName": "tube",
    "timing": {
      "$type": "Tfl.Api.Presentation.Entities.PredictionTiming, Tfl.Api.Presentation.Entities",
      "countdownServerAdjustment": "00:00:00",
      "source": "0001-01-01T00:00:00",
      "insert": "0001-01-01T00:00:00",
      "read": "2017-10-16T19:57:37.225Z",
      "sent": "2017-10-16T19:58:13Z",
      "received": "0001-01-01T00:00:00"
    }
  }
]</code></pre>

                    <aside class="notes">
                        <p>So thanks to the wonders of the internet, here's what's happening at Osterley. Or what was happening a couple of weeks ago.</p>

                        <p>This becomes somewhat harder to understand once you look at what's happening at a station like Baker Street. But if you know the tube network and you know which data you are after, it's trivially easy.</p>

                    </aside>
                </section>


                <section>
                    <h2>What's in the data?</h2>
                    <table>
                        <tr>
                            <td>destinationNaptanId</td>
                            <td>940GZZLUHR4</td>
                        </tr>
                        <tr>
                            <td>destinationName</td>
                            <td>Heathrow Terminal 4 Underground Station</td>
                        </tr>
                        <tr>
                            <td>expectedArrival</td>
                            <td>2017-10-16T20:20:29Z</td>
                        </tr>
                        <tr>
                            <td>platformName</td>
                            <td>Westbound - Platform 1</td>
                        </tr>
                        <tr>
                            <td>currentLocation</td>
                            <td>Approaching Barons Court</td>
                        </tr>
                        <tr>
                            <td>vehicleId</td>
                            <td>364</td>
                        </tr>
                    </table>

                    <aside class="notes">
                        <p>So what sort of data do we have? Well, we have the destination of the train both as the NaPTAN and the English name.</p>
                        <p>We can also find out when the train is expected to arrive here - this *should* be the same as appears on the platform describers but for dull technical reasons probably isn't.</p>
                        <p>We can also tell which platform it is at, although this can be more accurate at some stations than others.</p>
                        <p>We also have a text string showing where the train is currently.</p>
                        <p>We also have something called vehicleId - but this refers to the timetable, and nothing related to the actual train.</p>
                    </aside>
                </section>

                <section>
                    <img class="stretch" data-src="tubedata.png" style="border: none;">

                    <aside class="notes">
                        <p>And here is that data parsed and presented nicely, admittedly on the TfL website. You can do much better than just a webpage though, I made...</p>

                        <p>this device using a Pi Zero W and Pimoroni's wonderful inkyphat that sits in my hallway telling me when the next trains are coming at my local station.</p>
                    </aside>
                </section>


                <section>
                    <img class="stretch" data-src="IMG_7090.JPG" style="border: none;">

                    <aside class="notes">
                        <p>...this device using a Pi Zero W and Pimoroni's wonderful inkyphat that sits in my hallway telling me when the next trains are coming at my local station.</p>
                        <p>I did most of it in a couple of hours, and the majority of that time was spent getting the display to look nice.</p>
                        <p>So you can very easily get hold of this data...</p>
                    </aside>
                </section>

                <section>
<pre><code># Get next trains
r = requests.get('https://api.tfl.gov.uk/StopPoint/910GWATFDHS/Arrivals')

trains = []

for train in r.json():
    if train['destinationNaptanId'] == '910GEUSTON':
        train_time = arrow.get(train['expectedArrival']).to('Europe/London')
        train_mins = (train_time - arrow.now()).seconds / 60
        trains.append((train_time, train_mins))
</code></pre>

                    <aside class="notes">
                        <p>...it's honestly as simple as getting it and then pulling out the destinations and time data you want.</p>
                        <p>And of course Python is a perfect language to create something like this easily with, and I know many of you will have a Raspberry Pi sitting idle that you've been looking for a project for.</p>
                    </aside>
                </section>


                <section>
                    <img class="stretch" data-src="wttdis149p40.png" style="border: none;">

                    <aside class="notes">
                        <p>I'm not going to say any more about TfL because their data is easy to access, and we're in Cardiff and not London. Timetables for the tube are more complicated, and contrary to popular belief the tube does run to a very strict timetable, of which there's an example on the screen.</p>

                        <p>But unfortunately the method of getting those is way outside the scope of this talk. It's provided in a format called TransXChange, and it's everything you'd expect from a specification designed to be all encompassing and do everything.</p>
                    </aside>
                </section>

                <section>
                    (It's horrible)

                    <aside class="notes">
                        <p>Have a chat to me afterwards if you want to understand more and for some reason you love parsing several hundred megabyte XML documents.</p>
                    </aside>
                </section>

                <section>
                    <h1>The easy but onerously terms and conditioned way</h1>
                    <h2>Darwin</h2>

                    <aside class="notes">
                        <p>So how about the big railway?</p>
                        <p>There's a system called Darwin - it's reasonably easy to use, but the terms and conditions are a little onerous, so I'm going to skip on for that for now, and we'll do it the hard way.</p>
                    </aside>
                </section>




                <section>
                    <h1>CIF</h1>
                    <p><i>(Not a cleaning product)</i></p>

                    <aside class="notes">
                        <p>Lets start with the timetables. There is an XML feed, but the surprisingly better option is a wonderful format called CIF, which goes back to the mainframe era. It's basically a text file where each line holds a record.</p>
                    </aside>
                </section>


                <section>
<pre><code data-trim data-noescape>BSNC200571705221712081111100 PXX1B356108125375002 HST    125      B S C        P
BX         GWYGW610800
LOPADTON  1245 124510 3      TB
LIROYAOJN           1246 00000000   2
LIPRTOBJP           1247H00000000   2
LILDBRKJ            1248H00000000   ML 2
LIACTONW            1251H00000000   ML ML
LISTHALL            1253H00000000   ML
LIHTRWAJN           1254H00000000   ML
LISLOUGH            1258H000000002  ML
LIMDNHEAD           1301H000000001  ML
LITWYFORD           1304H000000001                    1
LIRDNGKBJ           1308 00000000   DML
LIRDNGSTN 1310 1312      130913109  ML    T
LIRDNGHLJ           1313H00000000
LIGORASTR           1318 00000000
LIDIDCOTP           1323 000000001                    1
LIWANTRD            1327H00000000
LICHALLOW           1329H00000000
LIUFNGTN            1330H00000000
LISDON    1337H1339H     133813384        T           1
LIWTNBSTJ           1346 00000000                      H
LIHLVNGTN           1353 00000000                      H
LIWSTLGHJ           1400H00000000                       1H
LIBRSTPWY 1406 1409      140514082        T
LIPATCHWY           1411 000000002
LIPILNING           1414 000000002
LISEVTNLE           1415 00000000
LISEVTNLW           1418H00000000
LISEVTNLJ           1419H000000003  ML
LILWERWJN           1425 00000000                     1
LIMAINDWJ           1428 00000000                        H
LINWPTRTG 1430 1432      143014312        T
LIEBBWJ             1435 00000000                     2
LIMSHFILD           1439H00000000
LILNGDYKJ           1444 00000000   D
LICRDFCEN 1446 1449      144514473        T
LILCKWTHJ           1451H00000000
LIPONYCLN           1500 00000000
LIBRGEND  1508 1509H     150815081        T
LISTORMY            1514 00000000
LIMRGMMJN           1516H00000000                     1
LIPTALBOT 1521 1522H     15211521         T
LINEATH   1528H1530      15291529         T           1
LISWANSLE           1540 00000000
LTSWANSEA 1542 15422     TF       </code></pre>

                    <aside class="notes">
                        <p>Here's the record for the train I got here on Wednesday. You can clearly see a little structure to it, but...</p>
                        <p>it's a lot simpler than it looks</p>
                    </aside>
                </section>

                <section>
                    <table style="font-size: smaller;">
                        <tr>
                            <td style="font-family: monospace">BS</td>
                            <td>Basic Schedule</td>
                        </tr>
                        <tr>
                            <td style="font-family: monospace">N</td>
                            <td>Record Type</td>
                        </tr>
                        <tr>
                            <td style="font-family: monospace">C20057</td>
                            <td>UID</td>
                        </tr>
                        <tr>
                            <td style="font-family: monospace">170522</td>
                            <td>Start Date - yymmdd</td>
                        </tr>
                        <tr>
                            <td style="font-family: monospace">171208</td>
                            <td>End Date - yymmdd</td>
                        </tr>
                        <tr>
                            <td style="font-family: monospace">1111100</td>
                            <td>Days run - mtwtfss</td>
                        </tr>
                        <tr>
                            <td style="font-family: monospace">PXX</td>
                            <td>This is an express passenger train</td>
                        </tr>
                        <tr>
                            <td style="font-family: monospace">1B35</td>
                            <td>Train Identity - used by signallers</td>
                        </tr>
                        <tr>
                            <td style="font-family: monospace">6108125375002</td>
                            <td>More details about stuff</td>
                        </tr>
                        <tr>
                            <td style="font-family: monospace">HST</td>
                            <td>is a High Speed Train</td>
                        </tr>
                        <tr>
                            <td style="font-family: monospace">125</td>
                            <td>Top speed in mph</td>
                        </tr>
                        <tr>
                            <td style="font-family: monospace">B S C</td>
                            <td>Has a buffet, first and standard class seating and you can reserve a seat</td>
                        </tr>
                    </table>

                    <aside class="notes">
                        <p>...it's a lot simpler than it looks - just chop the lines up into pieces of the specified length and match it to the spec.</p>
                        <p>I'll skim over this because there's a full and very detailed specification online however, in very poor timing news, they've just redone their website and the PDF has disappeared. I've contacted them to ask them to put it back, and I'll update the link in the GitHub repo when it is back.</p>
                        <p>But you can see here (adlib)</p>
                    </aside>
                </section>

                <section>
                    <table style="font-size: smaller;">
                        <tr>
                            <td style="font-family: monospace">LI</td>
                            <td>Intermediate Location</td>
                        </tr>
                        <tr>
                            <td style="font-family: monospace">CRDFCEN</td>
                            <td>Location ID</td>
                        </tr>
                        <tr>
                            <td style="font-family: monospace">1446</td>
                            <td>Scheduled Arrival</td>
                        </tr>
                        <tr>
                            <td style="font-family: monospace">1449</td>
                            <td>Scheduled Departure</td>
                        </tr>
                        <tr>
                            <td style="font-family: monospace">1445</td>
                            <td>Public Arrival</td>
                        </tr>
                        <tr>
                            <td style="font-family: monospace">1447</td>
                            <td>Public Departure</td>
                        </tr>
                        <tr>
                            <td style="font-family: monospace">3</td>
                            <td>Platform Number</td>
                        </tr>
                        <tr>
                            <td style="font-family: monospace">T</td>
                            <td>Activity - "Stops to take up and set down passengers"</td>
                        </tr>
                    </table>

                    <aside class="notes">
                        <p>Here's the record for a station stop. There's a couple of important points to note here. Firstly, you'll note that there's two sets of times.</p>

                        <p>The Public times are what is printed in the timetable. As you can see, the train is publicly listed to depart two minutes before it actually will - this is just to make sure everyone gets on the train on time and is very common on long distance trains like this.</p>

                        <p>The scheduled time is what will actually happen. This is what the driver and the signaller follow.</p>

                        <p>The other important thing is the Location ID. Now the big railway doesn't care about the NaPTANs we discussed earlier. Instead it uses many different types of ID just to be difficult.</p>
                    </aside>
                </section>

                <section>
                    <h2>Cardiff Central</h2>
                    <p>
                        <span style="font-family: monospace">CDF</span> - CRS Code<br>
                        <span style="font-family: monospace">77301</span> - Stanox<br>
                        <span style="font-family: monospace">CRDFCEN</span> - TIPLOC<br>
                    </p>

                    <aside class="notes">
                        <p>
                            Here's the three codes for Cardiff Central.<br>
                            The CRS Code you may have used as it's used by the booking systems - a bit like how LHR is used to denote Heathrow Airport.<br>
                            The Stanox tends to be reported by the train movements system (TRUST)<br>
                            The TIPLOC stands for Timing Point Location, and tends to be used by the timetabling system.
                        </p>

                        <p>Why are there three codes? Well, despite most of this harking back to British Rail days, the systems are there for different purposes.</p>
                        <p>CRS codes are just used for reserving seats and booking tickets.</p>
                        <p>TIPLOC codes are used to define timetables.</p>
                        <p>STANOX codes are much closer to the "bare metal" of the system, as it were.</p>
                    </aside>
                </section>

                <img src="foot.png" id="foot" style="border: none; background: none; box-shadow: none; top: -1000px; display: block; position: absolute; z-index: 100">
                <section data-state="footstomp">
                    <h1>STOMP</h1>
                    <img data-src="https://twemoji.maxcdn.com/2/svg/1f682.svg" style="width: 20%; height: 20%; border: none; background: none; box-shadow: none;">

                    <aside class="notes">
                        <p>So a lot of the most interesting feeds use STOMP. If you've ever used RabbitMQ - it's very similar.</p>
                        <p>There is a range of message queues you can subscribe to, and you get messages pushed out to you constantly. And I mean constantly - these feeds contain...</p>
                    </aside>
                </section>

                <section>
                    <h1>Exciting* amounts of data!</h1>

                    <aside class="notes">
                        <p>...exciting amounts of data</p>

                        <p>to me.</p>
                    </aside>
                </section>

                <section>
                    <h1>What data?</h1>
                    <ul>
                        <li>Train Movements</li>
                        <li>Cancellations</li>
                        <li>Trains moving between signals</li>
                        <li>What the signals are displaying<span class="fragment"> (ish)</span></li>
                    </ul>

                    <aside class="notes">
                        <p>So what sorts of data do we have? Well, we can find out when trains move between timing points, which is the sort of thing you'll be used to seeing online if you've ever used one of the open data led railway times sites.</p>
                        <p>We can also find when and more interestingly why trains are cancelled.</p>
                        <p>But if we really dig into the data, we can track a particular train moving between signals, and even what the signals themselves are displaying. Ish.</p>
                    </aside>
                </section>

                <section>
                    <h2>A simple Python STOMP client</h2>
                    <p>Using stomp.py v4</p>

                    <aside class="notes">
                        <p>So let's take a quick look at how easy it is to get things from STOMP.</p>
                        <p>We'll be using stomp.py, which isn't the most pythonic of libraries, but it does at least work - I had a lot of trouble finding a working library when I started writing this stuff four years ago.</p>
                        <p>All the following code is on GitHub, and to use it you'll also need to sign up for a Network Rail open data account, again, the link is in the repo.</p>
                    </aside>
                </section>


                <section>
                    <h2>A Python STOMP client</h2>
<pre><code data-trim data-noescape>class RailListener(stomp.ConnectionListener):
    def on_error(self, headers, message):
        print('error: %s' % message)

    def on_message(self, header, message):
        messages = json.loads(message)
        print(header)
        print("\t%d bytes" % len(message))</code></pre>

                    <aside class="notes">
                        <p>So we need to set up a simple RailListener class. This adds a couple of methods - a very simple error handler and a very simple message handler.</p>
                        <p>You can see that I've left the json.loads in here just to show you where the messages are.</p>
                        <p>The messages variable will now hold a list of dicts, each of which will contain a message about the railway network that we can parse later.</p>
                    </aside>
                </section>

                <section>
                    <h2>A Python STOMP client</h2>
<pre><code>conn = stomp.Connection(host_and_ports=[('datafeeds.networkrail.co.uk', 61618)])
conn.set_listener('', RailListener())
conn.start()
conn.connect(config.NR_USERNAME, config.NR_PASSWORD, wait=True)
conn.subscribe(destination='/topic/TRAIN_MVT_ALL_TOC', id='MVT', ack='auto')</code></pre>

                    <aside class="notes">
                        <p>These few lines just setup a connection to Network Rail, and subscribe to a topic.</p>
                        <p>You can see that in this case I've subscribed to the Train Movement feed for all of the operators in the UK. Needless to say, this brings back a large amount of data, and you might want to start off with just one area.</p>
                    </aside>
                </section>

                <section>
                    <h2>A Python STOMP client</h2>
<pre><code data-trim data-noescape>try:
    while True:
        time.sleep(5)
except Exception as e:
    print(e)
    conn.disconnect()</code></pre>

                    <aside class="notes">
                        <p>And then in this very non-pythonic code, you can see that we have a while loop - this pauses just to avoid flooding the server with requests - it will store messages in the queue for a minute or so.</p>
                        <p>And if there is an error, or we kill the script, it will disconnect cleanly from the server.</p>
                        <p>There are many ways of writing this code, this is just the shortest.</p>
                    </aside>
                </section>

                <section>
                    <h2>So what do you get?</h2>
<pre><code>{
    "CA_MSG": {
        "to": "0479",
        "time": "1508789194000",
        "area_id": "TB",
        "msg_type": "CA",
        "from": "0477",
        "descr": "1J52"
    }
}
</code></pre>

                    <aside class="notes">
                        <p>So after all that, we get a lot of messages containing little nuggets of data.</p>
                        <p>This one tells us that train 1J52 - which was the 2032 service from London Victoria to Southampton Central and Bognor Regis on Monday - passed from signal TB0477 to signal TB0479 at 2106 and 34 seconds.</p>
                        <p>The best part about this seemingly useless bit of information is that it relates to the movement of a real live actual 200 ton train.</p>
                        <p>I think this signal is somewhere near Merstham in Surrey, and if we were sat at that station, we'd have seen that train go through.</p>
                    </aside>
                </section>

                <section>
                    <p>Yes Kirk, it's all very well saying that it passed from signal TB 0477 to signal TB 0479 at 21:06:34, but I still don't really know what that means</p>

                    <aside class="notes">
                        <p>If I've blinded you with numbers and letters there, let's take a very quick aside to look at how railway signalling works.</p>
                    </aside>
                </section>

                <section>
                    <h3>Railway Signalling for Beginners</h3>

                    <table>
                        <tr style="border-bottom: 5px #939598 solid;">
                            <td style="border-right: 2px white dashed; width: 25%;"><img data-src="https://twemoji.maxcdn.com/2/svg/1f682.svg" style="width: 50%; height: 50%; border: none; background: none; box-shadow: none; transform: scaleX(-1);"><img data-src="1f6a6-3aspect-green.svg" style="width: 50%; height: 50%; border: none; background: none; box-shadow: none;"></td>
                            <td style="border-right: 2px white dashed; width: 25%; text-align: right;"><img data-src="1f6a6-3aspect-yellow.svg" style="width: 50%; height: 50%; border: none; background: none; box-shadow: none;"></td>
                            <td style="border-right: 2px white dashed; width: 25%; text-align: right;"><img data-src="1f6a6-3aspect-red.svg" style="width: 50%; height: 50%; border: none; background: none; box-shadow: none; "></td>
                            <td style="width: 25%;"><img data-src="https://twemoji.maxcdn.com/2/svg/1f682.svg" style="width: 50%; height: 50%; border: none; background: none; box-shadow: none; transform: scaleX(-1);"><img data-src="1f6a6-3aspect-green.svg" style="width: 50%; height: 50%; border: none; background: none; box-shadow: none;"></td>
                        </tr>
                    </table>

                    <aside class="notes">
                        <p>At the moment, in the UK we mostly use fixed block signalling, and for the purpose of this, we shall assume that is all that exists.</p>
                        <p>Trains are identified as being in blocks - similarly sized lengths of track the entry of which is guarded by a signal.</p>
                        <p>The fundamental rule of railway signalling is that only one train can occupy each block at a time.</p>
                        <p>Trains are big and heavy, and take a long time to stop. So they are given warning - if a signal is at red, the previous signal will be at yellow in order to give the driver enough time to stop the train.</p>
                    </aside>
                </section>

                <section>
                    <h3>Railway Signalling for Beginners</h3>

                    <table>
                        <tr style="border-bottom: 5px #939598 solid;">
                            <td style="border-right: 2px white dashed; width: 20%;"><img data-src="https://twemoji.maxcdn.com/2/svg/1f682.svg" style="width: 50%; height: 50%; border: none; background: none; box-shadow: none; transform: scaleX(-1);"><img data-src="1f6a6-4aspect-green.svg" style="width: 50%; height: 50%; border: none; background: none; box-shadow: none;"></td>
                            <td style="border-right: 2px white dashed; width: 20%; text-align: right;"><img data-src="1f6a6-4aspect-doubleyellow.svg" style="width: 50%; height: 50%; border: none; background: none; box-shadow: none;"></td>
                            <td style="border-right: 2px white dashed; width: 20%; text-align: right;"><img data-src="1f6a6-4aspect-yellow.svg" style="width: 50%; height: 50%; border: none; background: none; box-shadow: none;"></td>
                            <td style="border-right: 2px white dashed; width: 20%; text-align: right;"><img data-src="1f6a6-4aspect-red.svg" style="width: 50%; height: 50%; border: none; background: none; box-shadow: none; "></td>
                            <td style="width: 20%;"><img data-src="https://twemoji.maxcdn.com/2/svg/1f682.svg" style="width: 50%; height: 50%; border: none; background: none; box-shadow: none; transform: scaleX(-1);"><img data-src="1f6a6-4aspect-green.svg" style="width: 50%; height: 50%; border: none; background: none; box-shadow: none;"></td>
                        </tr>
                    </table>

                    <aside class="notes">
                        <p>On express lines, where the trains might take even longer to stop, they actually have extra warning - a double yellow signal.</p>
                    </aside>
                </section>

                <section>
                    <h3>Railway Signalling for Beginners</h3>

                    <table>
                        <tr style="border-bottom: 5px #939598 solid;">
                            <td style="border-right: 2px white dashed; width: 25%;">
                                <table>
                                    <tr>
                                        <td>
                                            <img data-src="https://twemoji.maxcdn.com/2/svg/1f682.svg" style="width: 50%; height: 50%; border: none; background: none; box-shadow: none; transform: scaleX(-1);">
                                        </td>
                                        <td>

                                            <img data-src="1f6a6-3aspect-green.svg" style="width: 50%; height: 50%; border: none; background: none; box-shadow: none;">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            1E23
                                        </td>
                                        <td>
                                            <div style="background: black; width: 2.5em; height: 2.5em; text-align: center; font-size: 0.75em;">TB<br>1234</div>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td style="border-right: 2px white dashed; width: 25%; text-align: right;">
                                <table>
                                    <tr>
                                        <td style="text-align: right;">
                                            <img data-src="1f6a6-3aspect-yellow.svg" style="width: 50%; height: 50%; border: none; background: none; box-shadow: none;">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: right;">
                                            <div style="background: black; width: 2.5em; height: 2.5em; text-align: center; font-size: 0.75em;">TB<br>1236</div>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td style="border-right: 2px white dashed; width: 25%; text-align: right;">
                                <table>
                                    <tr>
                                        <td style="text-align: right;">
                                            <img data-src="1f6a6-3aspect-red.svg" style="width: 50%; height: 50%; border: none; background: none; box-shadow: none;">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align: right;">
                                            <div style="background: black; width: 2.5em; height: 2.5em; text-align: center; font-size: 0.75em;">TB<br>1238</div>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td style="width: 25%;">
                                <table>
                                    <tr>
                                        <td>
                                            <img data-src="https://twemoji.maxcdn.com/2/svg/1f682.svg" style="width: 50%; height: 50%; border: none; background: none; box-shadow: none; transform: scaleX(-1);">
                                        </td>
                                        <td>

                                            <img data-src="1f6a6-3aspect-green.svg" style="width: 50%; height: 50%; border: none; background: none; box-shadow: none;">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            1E22
                                        </td>
                                        <td>
                                            <div style="background: black; width: 2.5em; height: 2.5em; text-align: center; font-size: 0.75em;">TB<br>1240</div>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>

                    <aside class="notes">
                        <p>Each of these signals has an area code - which is based on the signal box that controls it - and a unique identifier. The train has its own reporting code too.</p>
                        <p>So in our previous example, the area code was TB, which is Three Bridges in West Sussex.</p>
                        <p>The train reporting code is your link back to the timetable, although it's not a straight one to one mapping.</p>
                    </aside>
                </section>

                <section>
                    <img class="stretch" data-src="IMG_1225.jpg" style="border: none;">

                    <aside class="notes">
                        <p>You can see the signal numbers on a plate below each signal - here's an example of signal Y226 at York Station.</p>
                        <p>And so you can have a look next time you get on a train, write a few numbers down and you can save time with trainspotting by just watching them scroll past on your console instead.</p>
                    </aside>
                </section>

                <section>
                    <p>Also you said something about being able to see what the signals were displaying?</p>

                    <aside class="notes">
                        <p>So. Can you see what the signals are displaying. Well, yes. And no.</p>
                    </aside>
                </section>

                <section>
<pre><code>{
    "SF_MSG": {
        "time": "1508789194000",
        "area_id": "YO",
        "address": "13",
        "msg_type": "SF",
        "data": "DF"
    }
}</code></pre>

                    <aside class="notes">
                        <p>Here's some data from the Yoker signalling centre near Glasgow.</p>
                        <p>The data appears as DF, but this is hexadecimal, what we're actually seeing here is:</p>
                    </aside>
                </section>

                <section>
<pre><code>Data byte 13: 1101 1111</code></pre>

                    <aside class="notes">
                        <p>Each bit means something.</p>
                        <p>Could be a signal being at red.</p>
                        <p>Could be a level crossing being shut.</p>
                        <p>Could be a route being set.</p>
                        <p>We don't know. It's not published.</p>
                        <p>We can try and work it out, and some people have managed to do so brilliantly.</p>
                    </aside>
                </section>

                <section>
                    <h2>OpenTrainTimes</h2>
                    <p>Not my site, I'm just a fan</p>

                    <aside class="notes">
                        <p>For example, Poggs who runs Open Train Times, which shows the panel of all the signals and trains in an area.</p>
                        <p>This has all been created using the open data, although I must stress very much not by me, I'm just a fan of the site but a number of railway staff and stations have have been seen using it!</p>
                    </aside>
                </section>

                <section>
                    <h1>The Problem</h1>

                    <aside class="notes">
                        <p>But this site is built by someone with very close ties to the industry.</p>
                        <p>Most people don't have those ties and the knowledge is still too scattered, too much in the hands of the rail companies and a few hobbyists.</p>
                        <p>There doesn't appear to be a good reason for this, just that everyone wants to keep their hard work for themselves.</p>
                    </aside>
                </section>

                <section>
                    <h1>The Solution?</h1>

                    <aside class="notes">
                        <p>But we like Python. We use open source code all day every day.</p>
                        <p>Why can't we make this open source? Why can't we get together and produce a bunch of code for working with this stuff?</p>
                        <p>Some of you people will be brilliant data analysts who see my problem of "does this bit refer to a signal" and can solve it in your sleep.</p>
                        <p>So why not? I've given you everything you need to get started. So if you're inspired, why not take a look at my code, go and play and more importantly share what you find.</p>
                    </aside>
                </section>


                 <section>
                    <h1>Slides, code, links</h1>
                    <br>
                    <p style="font-size: 2em;">http://bit.ly/pythonchoochoo</p>
                    <br>
                    <p>https://github.com/kirknorthrop/choochoo</p>

                    <aside class="notes">
                        <p>All the slides, code and some useful links are on the GitHub repo for this talk, you can access that at bit.ly/pythonchoochoo - both those links go to the same place.</p>
                        <p>I'm trying to release as much rail related code as I can under open source, but it's taking time to get there.</p>
                        <p>If you've ever decided to release your own poorly hacked together messy code under open source, you'll understand why it's taking a while.</p>
                        <p>The Raspberry Pi train information board I showed earlier is also open source and on my GitHub if you want to build one.</p>
                    </aside>
                </section>



            </div>

        </div>

        <script src="reveal.js/lib/js/head.min.js"></script>
        <script src="reveal.js/js/reveal.js"></script>

        <script>

            // More info https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: false,
                progress: false,
                history: true,
                center: true,

                transition: 'fade', // none/fade/slide/convex/concave/zoom

                width: 1366,
                height: 768,
                margin: 0.1,

                // More info https://github.com/hakimel/reveal.js#dependencies
                dependencies: [
                    { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true },
                    { src: 'reveal.js/plugin/notes/notes.js', async: true }
                ]
            });

      var footPos;

      function raiseFoot() {
        var foot = document.getElementById('foot');

        if(footPos > -1000) {
          footPos = footPos - 8;
          foot.style.top = footPos + 'px';
          setTimeout(raiseFoot, 1);
        }
      }

      function dropFoot() {
        var foot = document.getElementById('foot');

        if(footPos < -100) {
          footPos = footPos + 8;
          foot.style.top = footPos + 'px';
          setTimeout(dropFoot, 1);
        }
      }

      function runFootStomp() {
        footPos = parseInt(foot.style.top.replace('/px/', ''));
        dropFoot();
        setTimeout(raiseFoot, 12000);
      }

      Reveal.addEventListener('footstomp', function() {
        setTimeout(runFootStomp, 2000);
      }, false );

      Reveal.addEventListener('slidechanged', function() {
        raiseFoot();
      }, false );
    </script>
    </body>
</html>
